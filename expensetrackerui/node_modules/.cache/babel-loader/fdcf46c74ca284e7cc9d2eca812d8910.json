{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nitin\\\\Projects\\\\ExpenseTracker\\\\expensetrackerui\\\\src\\\\Expenses.js\";\nimport React, { Component } from 'react';\nimport AppNav from './AppNav';\nimport DatePicker from 'react-datepicker';\nimport \"./App.css\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Table, Container, Form, FormGroup, Button, Label, Input } from 'reactstrap';\nimport { Link } from 'react-router-dom';\n\nclass Expenses extends Component {\n  constructor(props) {\n    super(props);\n    this.emptyItem = {\n      id: 51,\n      expenseDate: new Date(),\n      description: '',\n      amount: 0,\n      category: {\n        categoryId: 1,\n        categoryName: 'Travel'\n      }\n    };\n    this.state = {\n      date: new Date(),\n      isLoading: true,\n      categories: [],\n      expenses: [],\n      item: this.emptyItem\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const {\n      item\n    } = this.state;\n    await fetch(`/api/1.0/expense`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    });\n    console.log(this.state.item);\n    this.props.history.push('/expenses');\n  }\n\n  async handleDateChange(date) {\n    let item = { ...this.state.item\n    };\n    item.expenseDate = date;\n    this.setState({\n      item\n    });\n    console.log(item);\n  }\n\n  async handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    let item = { ...this.state.item\n    };\n    console.log(item);\n\n    if (name === 'category') {\n      let category = item.category;\n      console.log(category);\n      category.categoryId = value;\n    } else {\n      item[name] = value;\n    }\n\n    this.setState({\n      item\n    });\n    console.log(this.state.item);\n  }\n\n  async remove(id) {\n    await fetch(`/api/1.0/expense/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      let updatedExpense = [...this.state.expenses].filter(i => i.id !== id);\n      this.setState({\n        expenses: updatedExpense\n      });\n    });\n  }\n\n  async componentDidMount() {\n    const body = await getAllCategories();\n    this.setState({\n      categories: body,\n      isLoading: false\n    });\n    const resExpenses = await fetch('/api/1.0/expenses');\n    const bodyExpenses = await resExpenses.json();\n    this.setState({\n      expenses: bodyExpenses,\n      isLoading: false\n    });\n  }\n\n  render() {\n    const title = /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 22\n      }\n    }, \"Add Expense\");\n    const {\n      categories\n    } = this.state;\n    const {\n      expenses,\n      isLoading\n    } = this.state;\n    if (isLoading) return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 20\n      }\n    }, \"Loading ......\");\n    let categoryList = categories.map(category => /*#__PURE__*/React.createElement(\"option\", {\n      key: category.categoryId,\n      value: category.categoryId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, category.categoryName));\n    let rows = expenses.map(expense => /*#__PURE__*/React.createElement(\"tr\", {\n      key: expense.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, expense.description), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, expense.amount), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, expense.expenseDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, expense.category.categoryName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      color: \"danger\",\n      onClick: () => this.remove(expense.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }, \"Delete\"))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AppNav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, title, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"description\",\n      id: \"description\",\n      onChange: this.handleChange,\n      autoComplete: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"category\",\n      onChange: this.handleChange,\n      autoComplete: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, categoryList)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }, \" Date\"), /*#__PURE__*/React.createElement(DatePicker, {\n      selected: this.state.item.expenseDate,\n      onChange: this.handleDateChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"amount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"amount\",\n      id: \"amount\",\n      onChange: this.handleChange,\n      autoComplete: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    }, \"Save\"), ' ', /*#__PURE__*/React.createElement(Button, {\n      color: \"secondary\",\n      tag: Link,\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, \"Cancel\")))), /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }, \" Expense List \"), /*#__PURE__*/React.createElement(Table, {\n      className: \"mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      width: \"40%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 33\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n      width: \"15%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 33\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n      width: \"25%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 33\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 33\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n      width: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 33\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }, rows))));\n  }\n\n}\n\nexport default Expenses;","map":{"version":3,"sources":["D:/Nitin/Projects/ExpenseTracker/expensetrackerui/src/Expenses.js"],"names":["React","Component","AppNav","DatePicker","Table","Container","Form","FormGroup","Button","Label","Input","Link","Expenses","constructor","props","emptyItem","id","expenseDate","Date","description","amount","category","categoryId","categoryName","state","date","isLoading","categories","expenses","item","handleSubmit","bind","handleChange","handleDateChange","event","preventDefault","fetch","method","headers","body","JSON","stringify","console","log","history","push","setState","target","value","name","remove","then","updatedExpense","filter","i","componentDidMount","getAllCategories","resExpenses","bodyExpenses","json","render","title","categoryList","map","rows","expense"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAO,WAAP;AACA,OAAO,4CAAP;AACA,SAASC,KAAT,EAAgBC,SAAhB,EAA2BC,IAA3B,EAAiCC,SAAjC,EAA4CC,MAA5C,EAAoDC,KAApD,EAA2DC,KAA3D,QAAwE,YAAxE;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAIA,MAAMC,QAAN,SAAuBX,SAAvB,CAAiC;AAc7BY,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AADc,SAXlBC,SAWkB,GAXP;AACPC,MAAAA,EAAE,EAAC,EADI;AAEPC,MAAAA,WAAW,EAAE,IAAIC,IAAJ,EAFN;AAGPC,MAAAA,WAAW,EAAE,EAHN;AAIPC,MAAAA,MAAM,EAAE,CAJD;AAKPC,MAAAA,QAAQ,EAAE;AACNC,QAAAA,UAAU,EAAE,CADN;AAENC,QAAAA,YAAY,EAAE;AAFR;AALH,KAWO;AAEd,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,IAAIP,IAAJ,EADG;AAETQ,MAAAA,SAAS,EAAE,IAFF;AAGTC,MAAAA,UAAU,EAAE,EAHH;AAITC,MAAAA,QAAQ,EAAE,EAJD;AAKTC,MAAAA,IAAI,EAAE,KAAKd;AALF,KAAb;AAQE,SAAKe,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAxB;AACL;;AAED,QAAMD,YAAN,CAAmBI,KAAnB,EAAyB;AACrBA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM;AAACN,MAAAA;AAAD,QAAS,KAAKL,KAApB;AACA,UAAMY,KAAK,CAAE,kBAAF,EAAoB;AAC3BC,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX,OAFkB;AAM3BC,MAAAA,IAAI,EAAGC,IAAI,CAACC,SAAL,CAAeZ,IAAf;AANoB,KAApB,CAAX;AASAa,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKnB,KAAL,CAAWK,IAAvB;AACA,SAAKf,KAAL,CAAW8B,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB;AAEH;;AAED,QAAMZ,gBAAN,CAAuBR,IAAvB,EAA4B;AACxB,QAAII,IAAI,GAAC,EAAC,GAAG,KAAKL,KAAL,CAAWK;AAAf,KAAT;AACAA,IAAAA,IAAI,CAACZ,WAAL,GAAkBQ,IAAlB;AACA,SAAKqB,QAAL,CAAc;AAACjB,MAAAA;AAAD,KAAd;AACAa,IAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;AACH;;AAGD,QAAMG,YAAN,CAAmBE,KAAnB,EAAyB;AACrB,UAAMa,MAAM,GAAEb,KAAK,CAACa,MAApB;AACA,UAAMC,KAAK,GAAED,MAAM,CAACC,KAApB;AACA,UAAMC,IAAI,GAAGF,MAAM,CAACE,IAApB;AAEA,QAAIpB,IAAI,GAAG,EAAC,GAAG,KAAKL,KAAL,CAAWK;AAAf,KAAX;AACAa,IAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;;AACA,QAAGoB,IAAI,KAAK,UAAZ,EAAyB;AACrB,UAAI5B,QAAQ,GAAEQ,IAAI,CAACR,QAAnB;AACAqB,MAAAA,OAAO,CAACC,GAAR,CAAYtB,QAAZ;AACAA,MAAAA,QAAQ,CAACC,UAAT,GAAoB0B,KAApB;AACH,KAJD,MAIK;AACDnB,MAAAA,IAAI,CAACoB,IAAD,CAAJ,GAAWD,KAAX;AACH;;AACD,SAAKF,QAAL,CAAc;AAACjB,MAAAA;AAAD,KAAd;AACAa,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKnB,KAAL,CAAWK,IAAvB;AAEH;;AAED,QAAMqB,MAAN,CAAalC,EAAb,EAAgB;AACZ,UAAMoB,KAAK,CAAE,oBAAmBpB,EAAG,EAAxB,EAA2B;AAClCqB,MAAAA,MAAM,EAAE,QAD0B;AAElCC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX;AAFyB,KAA3B,CAAL,CAMHa,IANG,CAME,MAAI;AACR,UAAIC,cAAc,GAAC,CAAC,GAAG,KAAK5B,KAAL,CAAWI,QAAf,EAAyByB,MAAzB,CAAiCC,CAAC,IAAGA,CAAC,CAACtC,EAAF,KAASA,EAA9C,CAAnB;AACA,WAAK8B,QAAL,CAAc;AAAClB,QAAAA,QAAQ,EAAGwB;AAAZ,OAAd;AACH,KATK,CAAN;AAUH;;AAEC,QAAMG,iBAAN,GAAyB;AACvB,UAAMhB,IAAI,GAAE,MAAMiB,gBAAgB,EAAlC;AACA,SAAKV,QAAL,CAAc;AAACnB,MAAAA,UAAU,EAAGY,IAAd;AAAoBb,MAAAA,SAAS,EAAE;AAA/B,KAAd;AAEA,UAAM+B,WAAW,GAAE,MAAMrB,KAAK,CAAC,mBAAD,CAA9B;AACA,UAAMsB,YAAY,GAAG,MAAMD,WAAW,CAACE,IAAZ,EAA3B;AACA,SAAKb,QAAL,CAAc;AAAClB,MAAAA,QAAQ,EAAG8B,YAAZ;AAA0BhC,MAAAA,SAAS,EAAE;AAArC,KAAd;AAGD;;AAGHkC,EAAAA,MAAM,GAAG;AAEL,UAAMC,KAAK,gBAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAb;AACA,UAAM;AAAClC,MAAAA;AAAD,QAAe,KAAKH,KAA1B;AACA,UAAM;AAACI,MAAAA,QAAD;AAAWF,MAAAA;AAAX,QAAwB,KAAKF,KAAnC;AAEA,QAAGE,SAAH,EACI,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAP;AAEJ,QAAIoC,YAAY,GACZnC,UAAU,CAACoC,GAAX,CAAe1C,QAAQ,iBACnB;AAAQ,MAAA,GAAG,EAAEA,QAAQ,CAACC,UAAtB;AAAkC,MAAA,KAAK,EAAED,QAAQ,CAACC,UAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMD,QAAQ,CAACE,YADf,CADJ,CADJ;AAOA,QAAIyC,IAAI,GACJpC,QAAQ,CAACmC,GAAT,CAAaE,OAAO,iBAChB;AAAI,MAAA,GAAG,EAAEA,OAAO,CAACjD,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKiD,OAAO,CAAC9C,WAAb,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK8C,OAAO,CAAC7C,MAAb,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK6C,OAAO,CAAChD,WAAb,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKgD,OAAO,CAAC5C,QAAR,CAAiBE,YAAtB,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,IAAb;AAAkB,MAAA,KAAK,EAAC,QAAxB;AAAiC,MAAA,OAAO,EAAE,MAAK,KAAK2B,MAAL,CAAYe,OAAO,CAACjD,EAApB,CAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CALJ,CADJ,CADJ;AAaA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAGI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK6C,KADL,eAEI,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAK/B,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAEI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,aAAxB;AAAsC,MAAA,EAAE,EAAC,aAAzC;AAAuD,MAAA,QAAQ,EAAE,KAAKE,YAAtE;AAAoF,MAAA,YAAY,EAAC,MAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAMI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,MAAA,IAAI,EAAC,UAAb;AAAwB,MAAA,QAAQ,EAAE,KAAKA,YAAvC;AAAqD,MAAA,YAAY,EAAC,MAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK8B,YADL,CAFJ,CANJ,eAcI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI,oBAAC,UAAD;AAAY,MAAA,QAAQ,EAAE,KAAKtC,KAAL,CAAWK,IAAX,CAAgBZ,WAAtC;AAAoD,MAAA,QAAQ,EAAE,KAAKgB,gBAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAdJ,eAmBI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,eAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,QAAxB;AAAiC,MAAA,EAAE,EAAC,QAApC;AAA6C,MAAA,QAAQ,EAAE,KAAKD,YAA5D;AAA0E,MAAA,YAAY,EAAC,MAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,CAnBJ,eA2BI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,SAAd;AAAwB,MAAA,IAAI,EAAC,QAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EACyD,GADzD,eAEI,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA0B,MAAA,GAAG,EAAErB,IAA/B;AAAqC,MAAA,EAAE,EAAC,GAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CA3BJ,CAFJ,CAHJ,eAyCI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAEI;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,CADJ,CADJ,eAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKqD,IADL,CAVJ,CAFJ,CAzCJ,CADJ;AA+DH;;AA9L4B;;AAiMjC,eAAepD,QAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport AppNav from './AppNav';\r\nimport DatePicker from 'react-datepicker';\r\nimport \"./App.css\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { Table, Container, Form, FormGroup, Button, Label, Input } from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nclass Expenses extends Component {\r\n\r\n\r\n    emptyItem ={\r\n        id:51,\r\n        expenseDate: new Date(),\r\n        description: '',\r\n        amount: 0,\r\n        category: {\r\n            categoryId: 1,\r\n            categoryName: 'Travel'\r\n        }\r\n    }\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            date: new Date(),\r\n            isLoading: true,\r\n            categories: [],\r\n            expenses: [],\r\n            item: this.emptyItem\r\n          }\r\n\r\n          this.handleSubmit = this.handleSubmit.bind(this);\r\n          this.handleChange = this.handleChange.bind(this);\r\n          this.handleDateChange = this.handleDateChange.bind(this);\r\n    }\r\n\r\n    async handleSubmit(event){\r\n        event.preventDefault();\r\n        const {item }= this.state;        \r\n        await fetch(`/api/1.0/expense`,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body : JSON.stringify(item)\r\n        });\r\n\r\n        console.log(this.state.item);\r\n        this.props.history.push('/expenses');\r\n\r\n    }\r\n\r\n    async handleDateChange(date){\r\n        let item={...this.state.item};\r\n        item.expenseDate =date;\r\n        this.setState({item});\r\n        console.log(item);\r\n    }\r\n\r\n\r\n    async handleChange(event){\r\n        const target= event.target;\r\n        const value= target.value;\r\n        const name = target.name;\r\n\r\n        let item = {...this.state.item};\r\n        console.log(item);\r\n        if(name === 'category' ) {\r\n            let category= item.category;\r\n            console.log(category);\r\n            category.categoryId=value;\r\n        }else{\r\n            item[name]=value;\r\n        }\r\n        this.setState({item});\r\n        console.log(this.state.item);\r\n\r\n    }\r\n\r\n    async remove(id){\r\n        await fetch(`/api/1.0/expense/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(()=>{\r\n            let updatedExpense=[...this.state.expenses].filter( i=> i.id !== id);\r\n            this.setState({expenses : updatedExpense });\r\n        });\r\n    }\r\n\r\n      async componentDidMount(){\r\n        const body= await getAllCategories();\r\n        this.setState({categories : body, isLoading: false});\r\n\r\n        const resExpenses= await fetch('/api/1.0/expenses');\r\n        const bodyExpenses = await resExpenses.json();\r\n        this.setState({expenses : bodyExpenses, isLoading: false});\r\n\r\n\r\n      }\r\n\r\n\r\n    render() { \r\n\r\n        const title= <h3>Add Expense</h3>;\r\n        const {categories }= this.state;\r\n        const {expenses, isLoading }= this.state;\r\n\r\n        if(isLoading) \r\n            return(<div>Loading ......</div>) \r\n\r\n        let categoryList = \r\n            categories.map(category =>\r\n                <option key={category.categoryId} value={category.categoryId}>\r\n                    { category.categoryName}    \r\n                </option>\r\n            )\r\n        \r\n        let rows=\r\n            expenses.map(expense =>\r\n                <tr key={expense.id}>\r\n                    <td>{expense.description}</td>\r\n                    <td>{expense.amount}</td>\r\n                    <td>{expense.expenseDate}</td>\r\n                    <td>{expense.category.categoryName}</td>\r\n                    <td><Button size=\"sm\" color=\"danger\" onClick={()=> this.remove(expense.id)}>Delete</Button></td>\r\n                </tr>\r\n            \r\n            )\r\n        \r\n\r\n        return ( \r\n            <div>\r\n                <AppNav/> \r\n                 \r\n                <Container>\r\n                    {title}\r\n                    <Form onSubmit={this.handleSubmit}>\r\n                        <FormGroup>\r\n                            <Label for=\"description\">Description</Label>\r\n                            <Input type=\"text\" name=\"description\" id=\"description\" onChange={this.handleChange} autoComplete=\"name\"/>\r\n                        </FormGroup>\r\n\r\n                        <FormGroup>\r\n                            <Label for=\"category\" >Category</Label>\r\n                            <select name=\"category\" onChange={this.handleChange} autoComplete=\"name\">\r\n                                {categoryList}\r\n                            </select>\r\n                            \r\n                        </FormGroup>\r\n\r\n                        <FormGroup>\r\n                            <Label for=\"date\"> Date</Label>\r\n                            <DatePicker selected={this.state.item.expenseDate}  onChange={this.handleDateChange}/>\r\n                        </FormGroup>\r\n\r\n                        <div className=\"row\">\r\n                            <FormGroup className=\"col-md-4 mb-3\" >\r\n                                <Label for=\"amount\">Amount</Label>\r\n                                <Input type=\"text\" name=\"amount\" id=\"amount\" onChange={this.handleChange} autoComplete=\"name\"/>\r\n                            </FormGroup>\r\n                        </div>\r\n                        \r\n\r\n                        <FormGroup>\r\n                            <Button color=\"primary\" type=\"submit\" >Save</Button>{' '}\r\n                            <Button color=\"secondary\" tag={Link} to=\"/\" >Cancel</Button>\r\n                        </FormGroup>\r\n\r\n                    </Form>\r\n                </Container>\r\n\r\n\r\n                <Container>\r\n                    <h3> Expense List </h3>\r\n                    <Table className=\"mt-4\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th width=\"40%\">Description</th>\r\n                                <th width=\"15%\">Amount</th>\r\n                                <th width=\"25%\">Date</th>\r\n                                <th>Category</th>\r\n                                <th width=\"10%\">Action</th>\r\n                            </tr> \r\n                        </thead>\r\n                        <tbody>\r\n                            {rows}\r\n                        </tbody>\r\n\r\n                    </Table>\r\n                </Container>\r\n\r\n            </div>     \r\n        );\r\n    }\r\n}\r\n \r\nexport default Expenses;"]},"metadata":{},"sourceType":"module"}